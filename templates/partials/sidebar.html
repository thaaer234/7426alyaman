{% load static emp_perms %}
<style>
.sidebar{width:260px;background:#222;color:#fff;min-height:100vh}
.sidebar a{color:#fff;text-decoration:none;display:block;padding:.75rem 1rem}
.sidebar a:hover{background:#333}
.sidebar .header{padding:1rem;border-bottom:1px solid #333}
</style>

<div class="sidebar">
  <div class="header">
    {% if user.is_authenticated %}
      <div><strong>{{ user.get_full_name|default:user.username }}</strong></div>
      <small>{{ user.username }}</small>
    {% else %}
      <div><strong>زائر</strong></div>
      <small>يرجى تسجيل الدخول</small>
    {% endif %}
  </div>

  {% if user.is_authenticated %}
    <a href="/">الرئيسية</a>

    {% if user.employee_profile %}
      <a href="{% url 'employ:employee_profile' user.employee_profile.pk %}">
        <i class="fas fa-user-circle"></i> ملفي الشخصي
      </a>
    {% endif %}

    {% if user.is_superuser or user|has_perm:"students_view" %}
      <a href="{% url 'students:student' %}">الطلاب</a>
    {% endif %}

    {% if user.is_superuser or user|has_perm:"teachers_view" %}
      <a href="{% url 'employ:teachers' %}">المدرسون</a>
    {% endif %}

    {% if user.is_superuser or user|has_perm:"accounting_view" %}
      <a href="{% url 'accounts:dashboard' %}">المحاسبة</a>
    {% endif %}

    <form action="{% url 'logout' %}" method="post" class="mt-auto" style="padding:1rem 0;">
      {% csrf_token %}
      <button class="btn btn-danger w-100" type="submit">تسجيل الخروج</button>
    </form>
  {% else %}
    <a href="{% url 'login' %}">تسجيل الدخول</a>
  {% endif %}
</div>
